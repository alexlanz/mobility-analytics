<!DOCTYPE html>
<html lang="en">
  <head>

    <title>bz analytics</title>
    <meta charset="UTF-8"> 

    <link rel="stylesheet" href="vendor/openlayers/4.6.4/ol.css">
    <link rel="stylesheet" href="map.css">
    <link rel="stylesheet" href="gfx.css">
    <link rel="stylesheet" href="vendor/jquery-ui/1.12.1/datepicker/jquery-ui.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">

    <script src="vendor/openlayers/4.6.4/ol.js"></script>
    <script src="vendor/jquery/3.3.1/jquery.js"></script>
    <script src="vendor/jquery-ui/1.12.1/datepicker/jquery-ui.js"></script>
    <script src="vendor/flot/0.8.3/jquery.flot.js"></script>
    <script src="vendor/flot/0.8.3/jquery.flot.time.js"></script>
    <script src="vendor/flot-axislabels/2.0.1/jquery.flot.axislabels.js"></script>
    <script src="map.js"></script>
    <script src="gfx.js" defer></script>

    <style>
       body {
          margin: 0px;
       } 
       #header > div
       {
          padding-left:  4px;
          padding-right: 4px;
       }
    </style>
  </head>

  <body style="display:flex; flex-direction:column; overflow-y:scroll">
  
    <div id="header" style="display:flex; flex-shrink:0;">
       <img id="logo" src="logo.png">
       <div style="flex-grow:1; display: flex;">
       		<div class="header_text" id="map_overview" onClick="showMapOverview()">MAP OVERVIEW</div>
       		<div class="header_text" id="headline" onClick="showHeadline()">HEADLINE</div>
       </div>
       <div style="padding-top:19px; padding-right:8px">
          <form id="loginform">
             <input id="loginuser" class="login_element" placeholder="username">
             <input id="loginpass" class="login_element" placeholder="password" type="password">
             <input id="login_button" type="submit" value="LOGIN">
          </form>
       </div>
    </div>

    <!-- *** MAPS ********************************************************************************* -->
    <div id="section_map" style="display:none; flex-direction:column; flex-grow:1; min-height:0px">

     <div style="display:flex; flex-grow:1; min-height:0px">
     
        <div id="layers-container" class="layers" style="overflow-y:scroll;">
            <div id="layer_template_id" class="layer_template">
                <img class="icon" src=""></img>
                <span class="label"></span>
                <img src="loading.png" style="width:20px;height:20px" class="spinner">
                <div class="progressbar_container">
                    <div class="progressbar_line"></div>
                </div>
            </div>
        </div>
        
        <div style="background-color:#c7e0bd; position:relative; flex-grow:1; min-width:0px ">
           <!-- 
           <div id="zoomlevel" style="position:absolute; right:2px; top:2px; z-index: 200000; background-color:white;padding:4px">Z</div>
            -->
           <div id="map" style="width:100%; height:100%"></div>
        </div>
        
        <div id="details-container" style="overflow-y:scroll;">
        	<div id="details-close">X</div>
         	<div id="details-title">title</div>
         	<hr id="details-line">
         	<div id="details-content"></div>
         	
        </div>

    </div>

    <div id="error-console" style="height:1.5em; flex-shrink:0;color:red; background-color:black"></div>

    <div id="map-popup" style="display:none">
         
         <div id="map-popup-box"><div id="map-popup-close">X</div>
         <div id="map-popup-title">title</div>
         <div id="map-popup-content">content</div>
         </div>
         <div id="map-popup-arrow"><div></div></div>
      </div>
    <script type="text/javascript">
       map_start_promise()
    </script>

    </div>

    <!-- *** GFX (CHARTS) ************************************************************************* -->

    <div id="section_gfx" style="; display:block">

    <div id="gfx">

      <!-- top panel with graph -->

      <div id="gfx_plot">
          <div id="gfx_flot"></div>
          <div id="gfx_wait"><br><br><br>empty plot</div>
      </div>

      <!-- spacer -->

      <div id="gfx_vspacer"></div>

      <!-- tabs -->

      <div id="gfx_tabs">
          <span class="gfx_tab"><a href="">legend</a></span><span class="gfx_tab"><a href="">select time range</a></span><span class="gfx_tab"><a href="">add data set</a></span><span class="gfx_tab"><a href="">extras</a></span>
      </div>

      <!-- tabbed panels -->

      <div id="gfx_tabbed_panels">

          <div id="gfx_legend">

            <p>&rarr; currently selected data sets:</p>

            <table>
            </table>

            <p>
            <button id="gfx_live">auto refresh off</button>
            </p>

            <div id="gfx_error_log"></div>

          </div>

          <div id="gfx_time">

              <p>&rarr; select date range:</p>

              <input id="gfx_fromdate" type="text" size="12">
              to <input id="gfx_todate"   type="text" size="12">
              &rarr; <span id="gfx_days"></span>
              <br><br>

              <button id="gfx_update_range">update plot</button>

              <p>&rarr; pick preset values:</p>

              <button id="gfx_range_today">today</button>
              <button id="gfx_range_ytoday">yesterday &amp; today</button>
              <button id="gfx_range_week">one week</button>
              <button id="gfx_range_month">one month</button>

          </div>

          <div id="gfx_moredata">

              <p>&rarr; add a data set to the plot:</p>

              <select id="gfx_selcategory">
              </select>

              <br><br>

              <select id="gfx_selstation">
              </select>

              <br><br>

              <select id="gfx_seldataset">
              </select>

              <br><br>

              <button id="gfx_addset">add selected data set</button>

          </div>

          <div id="gfx_extras">

              <p>&rarr; get a permanent link (warning: long) to the page with the current settings:<br><br>
                 <a href="" id="gfx_perma">permalink</a> (right click to copy)
              </p>

              <p>&rarr; select plot height:<br><br>
                <select id="gfx_hpx">
                    <option>200px</option>
                    <option>300px</option>
                    <option>400px</option>
                    <option>500px</option>
                    <option>600px</option>
                    <option>700px</option>
                    <option>800px</option>
                    <option>900px</option>
                    <option>1000px</option>
                    <option>1100px</option>
                    <option>1200px</option>
                </select>
              </p>

          </div>

      </div>

    </div>

    </div>

    <div style="flex-shrink:0; background-color:#dddddd">(C) 2018 :::: ::: :::</div>

  </body>

</html>

